# Multi-Object Recognition & Safety Monitoring System from Camera Stream

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![YOLOv8](https://img.shields.io/badge/AI-YOLOv8-green)
![Kafka](https://img.shields.io/badge/Apache-Kafka-red)
![Docker](https://img.shields.io/badge/Deployment-Docker-blue)

## Introduction

Dự án nghiên cứu và xây dựng hệ thống nhận diện đa đối tượng (cụ thể là giám sát tuân thủ bảo hộ lao động như khẩu trang) từ dữ liệu Camera Stream theo thời gian thực. Hệ thống được thiết kế hướng tới quy mô doanh nghiệp với kiến trúc Microservices, đảm bảo khả năng chịu tải cao và tính toàn vẹn dữ liệu.

Mục tiêu chính:
- Tự động hóa việc giám sát an toàn lao động tại xưởng sản xuất và văn phòng.
- Giảm thiểu các tác vụ giám sát thủ công thông qua AI.
- Lưu trữ bằng chứng vi phạm và báo cáo thống kê.

## Key Features

* **Real-time Streaming:** Xử lý luồng dữ liệu từ IP Camera qua giao thức RTSP.
* [cite_start]**Motion Detection (Producer):** Tối ưu hóa băng thông bằng thuật toán phát hiện chuyển động, chỉ gửi dữ liệu khi có sự thay đổi đáng kể (>3000px biến động)[cite: 802, 806].
* **AI Inference (Consumer):** Sử dụng mô hình **YOLOv8** để phát hiện và phân loại đối tượng (Mask/No Mask) với độ chính xác cao.
* [cite_start]**Robust Data Pipeline:** Sử dụng **Apache Kafka** làm xương sống trung chuyển dữ liệu (Producer-Consumer pattern), giải quyết bài toán nghẽn cổ chai (bottleneck)[cite: 680].
* **Hybrid Storage Strategy:**
    * [cite_start]**MinIO (Object Storage):** Lưu trữ hình ảnh phi cấu trúc (bằng chứng vi phạm)[cite: 841].
    * [cite_start]**SQL Server + Prisma ORM:** Lưu trữ dữ liệu nghiệp vụ có cấu trúc (metadata, sự kiện)[cite: 887].
* [cite_start]**Asynchronous Processing:** Tận dụng cơ chế `Async/Await` của Python để xử lý I/O non-blocking[cite: 920].

## System Architecture

Hệ thống hoạt động dựa trên mô hình phân tán gồm các module chính:

1.  **Camera Stream (Producer):** Kết nối RTSP, tiền xử lý ảnh, phát hiện chuyển động và đẩy dữ liệu vào Kafka Topic.
2.  **Message Broker (Kafka Cluster):** Bộ đệm trung gian đảm bảo tính tách biệt và ổn định giữa luồng thu thập và xử lý.
3.  **Mask Detection Service (Consumer):** Lắng nghe dữ liệu từ Kafka, thực hiện nhận diện bằng YOLOv8, áp dụng thuật toán NMS (Non-Maximum Suppression) và lưu kết quả.
4.  **Storage & Admin:** Hệ thống lưu trữ lai và Dashboard quản trị.

## Tech Stack

* **Ngôn ngữ:** Python.
* **AI/Computer Vision:** OpenCV, YOLOv8 (Ultralytics), NumPy, Pandas.
* **Hệ thống phân tán:** Apache Kafka.
* **Database & Storage:** Microsoft SQL Server, MinIO (S3 Compatible).
* **ORM:** Prisma.
* **DevOps/Deployment:** Docker, Docker Compose.
* **Quản lý mã nguồn:** Git/GitHub.

## Installation & Setup

Dự án được đóng gói hoàn chỉnh bằng Docker Compose, giúp việc triển khai trở nên đơn giản chỉ với một câu lệnh.

### Yêu cầu:
- Docker & Docker Compose
- Python 3.8+ nếu chạy local environment
- Camera IP 

### Các bước thực hiện:

1.  **Clone repository:**
    ```bash
    git clone [https://github.com/your-username/your-repo-name.git](https://github.com/your-username/your-repo-name.git)
    cd your-repo-name
    ```

2.  **Cấu hình môi trường (.env):**
    Tạo file `.env` và cấu hình các thông số kết nối (Database URL, MinIO keys, Kafka Broker, Camera RTSP URL...).

3.  **Khởi chạy hệ thống:**
    ```bash
    docker-compose up -d --build
    ```
    *Lệnh này sẽ khởi tạo toàn bộ các services: Zookeeper, Kafka, MinIO, SQL Server và các AI Services.*

4.  **Truy cập hệ thống:**
    - MinIO Console: `http://localhost:9001`
    - Application Dashboard (nếu có): `http://localhost:3000`

---
*Dự án được thực hiện trong quá trình Thực tập Kỹ thuật tại Công ty Cổ phần Dược phẩm CPC1 Hà Nội.*